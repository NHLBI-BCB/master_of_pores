includeConfig "$baseDir/preproc.config"

process {
  memory='4G'
  cache='lenient'
  container = 'biocorecrg/nanopore:0.9'
  queue='biocore-el7,long-sl7,short-sl7'

  withLabel: big_cpus {
        cpus = 2
        memory = '5G'
  }
  withLabel: big_mem_cpus {
        cpus = 2
        memory = '5G'
  }
  withLabel: basecall_cpus {
        container = 'biocorecrg/nanoporebasecall:0.1'
        cpus = 2
        memory = '5G'
  }
  withLabel: basecall_gpus {
        container = 'biocorecrg/nanoporebasecall:0.1'
        maxForks = 1
        containerOptions = { workflow.containerEngine == "singularity" ? '--nv' : '--gpus all' }
  } 
}
singularity.cacheDir = "$baseDir/singularity"
singularity.autoMounts = true
